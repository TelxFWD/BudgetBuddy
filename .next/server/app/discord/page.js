(()=>{var e={};e.id=589,e.ids=[589],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30515:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/runner/workspace/src/app/discord/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/workspace/src/app/discord/page.tsx","default")},32682:(e,s,r)=>{Promise.resolve().then(r.bind(r,92224))},33873:e=>{"use strict";e.exports=require("path")},41312:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70663:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},74075:e=>{"use strict";e.exports=require("zlib")},78984:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var t=r(65239),a=r(48088),i=r(88170),n=r.n(i),d=r(30893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(s,l);let c={children:["",{children:["discord",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,30515)),"/home/runner/workspace/src/app/discord/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/runner/workspace/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/home/runner/workspace/src/app/discord/page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/discord/page",pathname:"/discord",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},87891:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},92224:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>C});var t=r(60687),a=r(43210),i=r(54864),n=r(20092),d=r(44493),l=r(29523),c=r(89667),o=r(54300),x=r(96834),m=r(58887),h=r(96474),p=r(62688);let u=(0,p.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),j=(0,p.A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);var v=r(87891),g=r(70663),b=r(41312),f=r(88233),k=r(93613),y=r(99891),N=r(88920),w=r(26001),A=r(37590),_=r(33071);function C(){let{user:e}=(0,i.d4)(e=>e.auth),[s,r]=(0,a.useState)([]),[p,C]=(0,a.useState)(!1),[M,q]=(0,a.useState)(!1),[D,P]=(0,a.useState)(""),[S,R]=(0,a.useState)(""),z={free:1,pro:3,elite:10},$=z[e?.plan]||z.free,E=s.length<$,F=async()=>{C(!0);try{let e=await _.K.get("/discord/servers");r(e.data)}catch(e){console.error("Failed to load Discord servers:",e)}C(!1)},B=async()=>{if(!D.trim())return void A.oR.error("Please enter a bot token");C(!0);try{await _.K.post("/discord/servers",{bot_token:D,server_name:S||void 0}),await F(),q(!1),P(""),R(""),A.oR.success("Discord server connected successfully")}catch(e){A.oR.error(e.response?.data?.detail||"Failed to connect Discord server")}C(!1)},Z=async e=>{if(confirm("Are you sure you want to remove this Discord server?"))try{await _.K.delete(`/discord/servers/${e}`),await F(),A.oR.success("Discord server removed successfully")}catch(e){A.oR.error(e.response?.data?.detail||"Failed to remove server")}},G=async(e,s)=>{try{await _.K.patch(`/discord/servers/${e}`,{is_active:!s}),await F(),A.oR.success(`Server ${!s?"activated":"deactivated"} successfully`)}catch(e){A.oR.error(e.response?.data?.detail||"Failed to update server")}},I=e=>{switch(e){case"online":return"text-neon-green border-neon-green/30 bg-neon-green/10";case"connecting":return"text-neon-orange border-neon-orange/30 bg-neon-orange/10";case"offline":return"text-red-400 border-red-400/30 bg-red-400/10";default:return"text-dark-muted border-dark-border bg-dark-border/10"}};return(0,t.jsx)(n.A,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-dark-text flex items-center gap-3",children:[(0,t.jsx)(m.A,{className:"h-8 w-8 text-purple-400"}),"Discord Servers"]}),(0,t.jsx)("p",{className:"text-dark-muted mt-1",children:"Manage your connected Discord servers for message forwarding"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(x.E,{variant:"outline",className:"text-purple-400 border-purple-400",children:[s.length," / ",$," servers"]}),(0,t.jsxs)(l.$,{onClick:()=>q(!0),disabled:!E,className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Add Server"]})]})]}),(0,t.jsx)(N.N,{children:M&&(0,t.jsx)(w.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,t.jsxs)(d.Zp,{className:"glass-effect border-purple-400/30 bg-purple-400/5",children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-dark-text flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-5 w-5 text-purple-400"}),"Connect Discord Server"]})}),(0,t.jsx)(d.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"serverName",className:"text-dark-text",children:"Server Name (Optional)"}),(0,t.jsx)(c.p,{id:"serverName",placeholder:"My Discord Server",value:S,onChange:e=>R(e.target.value),className:"mt-1 bg-dark-border border-dark-border text-dark-text"}),(0,t.jsx)("p",{className:"text-dark-muted text-sm mt-1",children:"Custom name for easy identification"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"botToken",className:"text-dark-text",children:"Bot Token"}),(0,t.jsx)(c.p,{id:"botToken",type:"password",placeholder:"Your Discord bot token",value:D,onChange:e=>P(e.target.value),className:"mt-1 bg-dark-border border-dark-border text-dark-text"}),(0,t.jsx)("p",{className:"text-dark-muted text-sm mt-1",children:"Get your bot token from Discord Developer Portal"})]}),(0,t.jsxs)("div",{className:"p-4 bg-neon-blue/10 border border-neon-blue/30 rounded-lg",children:[(0,t.jsxs)("h4",{className:"text-dark-text font-medium mb-2 flex items-center gap-2",children:[(0,t.jsx)(u,{className:"h-4 w-4"}),"How to create a Discord bot:"]}),(0,t.jsxs)("ol",{className:"text-dark-muted text-sm space-y-1 list-decimal list-inside",children:[(0,t.jsx)("li",{children:"Go to Discord Developer Portal"}),(0,t.jsx)("li",{children:"Create a new application and bot"}),(0,t.jsx)("li",{children:"Copy the bot token"}),(0,t.jsx)("li",{children:"Invite the bot to your server with necessary permissions"})]}),(0,t.jsxs)(l.$,{size:"sm",variant:"outline",className:"mt-3 border-neon-blue text-neon-blue hover:bg-neon-blue/10",onClick:()=>window.open("https://discord.com/developers/applications","_blank"),children:[(0,t.jsx)(u,{className:"h-3 w-3 mr-1"}),"Developer Portal"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l.$,{onClick:B,disabled:!D||p,className:"bg-purple-500 hover:bg-purple-600 text-white",children:p?"Connecting...":"Connect Server"}),(0,t.jsx)(l.$,{variant:"outline",onClick:()=>q(!1),className:"border-dark-border hover:border-red-400 hover:text-red-400",children:"Cancel"})]})]})})]})})}),(0,t.jsx)(N.N,{mode:"wait",children:p?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-400"})}):0===s.length?(0,t.jsx)(d.Zp,{className:"glass-effect border-dark-border",children:(0,t.jsxs)(d.Wu,{className:"text-center py-12",children:[(0,t.jsx)(m.A,{className:"h-12 w-12 text-dark-muted mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-dark-text mb-2",children:"No Discord servers connected"}),(0,t.jsx)("p",{className:"text-dark-muted mb-6",children:"Connect your first Discord server to start forwarding messages"}),E&&(0,t.jsxs)(l.$,{onClick:()=>q(!0),className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Connect Discord"]})]})}):(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:s.map((e,s)=>(0,t.jsx)(w.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:(0,t.jsxs)(d.Zp,{className:"glass-effect border-dark-border hover:border-purple-400/50 transition-all duration-300 group",children:[(0,t.jsx)(d.aR,{className:"pb-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:(0,t.jsx)(j,{className:"h-5 w-5 text-purple-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-dark-text font-medium",children:e.server_name}),(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:e.server_id})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(x.E,{className:`text-xs ${I(e.bot_status)}`,children:e.bot_status})})]})}),(0,t.jsxs)(d.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-dark-muted text-sm",children:"Status"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:e.is_active?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.A,{className:"h-3 w-3 text-neon-green"}),(0,t.jsx)("span",{className:"text-neon-green text-sm",children:"Active"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{className:"h-3 w-3 text-red-400"}),(0,t.jsx)("span",{className:"text-red-400 text-sm",children:"Inactive"})]})})]}),e.member_count&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-dark-muted text-sm",children:"Members"}),(0,t.jsxs)("span",{className:"text-dark-text text-sm flex items-center gap-1",children:[(0,t.jsx)(b.A,{className:"h-3 w-3"}),e.member_count]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-dark-muted text-sm",children:"Permissions"}),(0,t.jsxs)("span",{className:"text-dark-text text-sm",children:[e.permissions?.length||0," granted"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-dark-muted text-sm",children:"Last Seen"}),(0,t.jsx)("span",{className:"text-dark-text text-sm",children:new Date(e.last_seen).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-dark-muted text-sm",children:"Connected"}),(0,t.jsx)("span",{className:"text-dark-text text-sm",children:new Date(e.created_at).toLocaleDateString()})]})]}),e.permissions&&e.permissions.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-muted text-sm mb-2",children:"Bot Permissions:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.permissions.slice(0,3).map((e,s)=>(0,t.jsx)(x.E,{variant:"outline",className:"text-xs",children:e},s)),e.permissions.length>3&&(0,t.jsxs)(x.E,{variant:"outline",className:"text-xs",children:["+",e.permissions.length-3," more"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,t.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>G(e.id,e.is_active),className:`flex-1 ${e.is_active?"border-red-400/30 text-red-400 hover:bg-red-400/10":"border-neon-green/30 text-neon-green hover:bg-neon-green/10"}`,children:e.is_active?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{className:"h-3 w-3 mr-1"}),"Deactivate"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Activate"]})}),(0,t.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>Z(e.id),className:"border-red-400/30 text-red-400 hover:bg-red-400/10",children:(0,t.jsx)(f.A,{className:"h-3 w-3"})})]})]})]})},e.id))})}),!E&&(0,t.jsx)(d.Zp,{className:"glass-effect border-neon-orange/30 bg-neon-orange/5",children:(0,t.jsx)(d.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(k.A,{className:"h-5 w-5 text-neon-orange"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-text font-medium",children:"Server Limit Reached"}),(0,t.jsxs)("p",{className:"text-dark-muted text-sm",children:["Upgrade to ",e?.plan==="free"?"Pro":"Elite"," plan to connect more Discord servers"]})]}),(0,t.jsx)(l.$,{size:"sm",className:"ml-auto bg-neon-orange hover:bg-neon-orange/90 text-black",onClick:()=>window.location.href="/billing",children:"Upgrade"})]})})}),(0,t.jsxs)(d.Zp,{className:"glass-effect border-dark-border",children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-dark-text flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-5 w-5 text-neon-blue"}),"Important Information"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-dark-text font-medium mb-3",children:"Bot Setup Requirements"}),(0,t.jsxs)("ul",{className:"text-dark-muted text-sm space-y-2",children:[(0,t.jsx)("li",{children:'• Your bot needs "Send Messages" permission'}),(0,t.jsx)("li",{children:"• Bot should have access to target channels"}),(0,t.jsx)("li",{children:'• Ensure bot has "Read Message History" for context'}),(0,t.jsx)("li",{children:'• "Manage Messages" for advanced features'})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-dark-text font-medium mb-3",children:"Security & Management"}),(0,t.jsxs)("ul",{className:"text-dark-muted text-sm space-y-2",children:[(0,t.jsx)("li",{children:"• Bot tokens are encrypted and stored securely"}),(0,t.jsx)("li",{children:"• Each server can be used in multiple forwarding pairs"}),(0,t.jsx)("li",{children:"• Inactive servers won't participate in forwarding"}),(0,t.jsx)("li",{children:"• Bot health is monitored automatically"})]})]})]})})]})]})})}},94735:e=>{"use strict";e.exports=require("events")},98178:(e,s,r)=>{Promise.resolve().then(r.bind(r,30515))},99891:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[996,330,932,301,408],()=>r(78984));module.exports=t})();