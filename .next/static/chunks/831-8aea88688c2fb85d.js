"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{12638:(e,t,r)=>{r.d(t,{A:()=>b});var a=r(95155),s=r(12115),n=r(34540),o=r(89519),l=r(57340),i=r(38164),d=r(46767),c=r(81497),u=r(72713),h=r(81586),g=r(381),f=r(54416),m=r(34835),x=r(74783),p=r(23861);let k=[{icon:l.A,label:"Dashboard",href:"/"},{icon:i.A,label:"Forwarding Pairs",href:"/forwarding"},{icon:d.A,label:"Telegram Accounts",href:"/telegram"},{icon:c.A,label:"Discord Servers",href:"/discord"},{icon:u.A,label:"Analytics",href:"/analytics"},{icon:h.A,label:"Billing",href:"/billing"},{icon:g.A,label:"Settings",href:"/settings"}];function b(e){var t;let{children:r}=e,l=(0,n.wA)(),{user:i}=(0,n.d4)(e=>e.auth),[d,c]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"min-h-screen bg-dark-bg",children:[d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>c(!1)}),(0,a.jsxs)("div",{className:"\n        fixed inset-y-0 left-0 z-50 w-64 bg-dark-card border-r border-dark-border transform transition-transform duration-300 ease-in-out\n        ".concat(d?"translate-x-0":"-translate-x-full","\n        lg:translate-x-0 lg:static lg:inset-0\n      "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-dark-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-neon-blue to-neon-purple rounded-lg"}),(0,a.jsx)("span",{className:"text-lg font-bold text-dark-text",children:"AutoForwardX"})]}),(0,a.jsx)("button",{onClick:()=>c(!1),className:"lg:hidden text-dark-muted hover:text-dark-text",children:(0,a.jsx)(f.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("nav",{className:"mt-6 px-3",children:k.map(e=>(0,a.jsxs)("a",{href:e.href,className:"flex items-center px-3 py-3 text-dark-muted hover:text-neon-blue hover:bg-neon-blue/10 rounded-lg transition-all duration-300 group mb-1",children:[(0,a.jsx)(e.icon,{className:"h-5 w-5 mr-3 group-hover:text-neon-blue transition-colors"}),e.label]},e.href))}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-dark-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-neon-blue to-neon-purple rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-bold text-white",children:(null==i||null==(t=i.username)?void 0:t.charAt(0).toUpperCase())||"U"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-dark-text truncate",children:(null==i?void 0:i.username)||"User"}),(0,a.jsxs)("p",{className:"text-xs text-dark-muted capitalize",children:[(null==i?void 0:i.plan)||"free"," plan"]})]})]}),(0,a.jsxs)("button",{onClick:()=>{l((0,o.ri)())},className:"flex items-center w-full px-3 py-2 text-dark-muted hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-all duration-300",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-3"}),"Sign out"]})]})]}),(0,a.jsxs)("div",{className:"lg:pl-64",children:[(0,a.jsxs)("header",{className:"h-16 bg-dark-card border-b border-dark-border flex items-center justify-between px-4 lg:px-6",children:[(0,a.jsx)("button",{onClick:()=>c(!0),className:"lg:hidden text-dark-muted hover:text-dark-text",children:(0,a.jsx)(x.A,{className:"h-6 w-6"})}),(0,a.jsx)("div",{className:"flex items-center space-x-4 ml-auto",children:(0,a.jsxs)("button",{className:"text-dark-muted hover:text-dark-text relative",children:[(0,a.jsx)(p.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"absolute -top-1 -right-1 h-2 w-2 bg-neon-orange rounded-full"})]})})]}),(0,a.jsx)("main",{className:"p-4 lg:p-6",children:r})]})]})}},26126:(e,t,r)=>{r.d(t,{E:()=>l});var a=r(95155);r(12115);var s=r(74466),n=r(59434);let o=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(o({variant:r}),t),...s})}},59434:(e,t,r)=>{r.d(t,{cn:()=>n});var a=r(52596),s=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},59959:(e,t,r)=>{r.d(t,{F:()=>n,y:()=>i});var a=r(23464);let s=r(49509).env.NEXT_PUBLIC_API_URL||"/api",n=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),o="autoforwardx_tokens",l="autoforwardx_user",i={async login(e){let{access_token:t,refresh_token:r,token_type:a,expires_in:s}=(await n.post("/auth/login",e)).data,o={access_token:t,refresh_token:r,token_type:a,expires_in:s};this.setTokens(o);let l=(await n.get("/auth/me",{headers:{Authorization:"Bearer ".concat(t)}})).data;return this.setUser(l),{tokens:o,user:l}},async register(e){let{access_token:t,refresh_token:r,token_type:a,expires_in:s}=(await n.post("/auth/register",e)).data,o={access_token:t,refresh_token:r,token_type:a,expires_in:s};this.setTokens(o);let l=(await n.get("/auth/me",{headers:{Authorization:"Bearer ".concat(t)}})).data;return this.setUser(l),{tokens:o,user:l}},async sendTelegramOTP(e){await n.post("/auth/telegram/send-otp",e)},async verifyTelegramOTP(e){let{access_token:t,refresh_token:r,token_type:a,expires_in:s}=(await n.post("/auth/telegram/verify-otp",e)).data,o={access_token:t,refresh_token:r,token_type:a,expires_in:s};this.setTokens(o);let l=(await n.get("/auth/me",{headers:{Authorization:"Bearer ".concat(t)}})).data;return this.setUser(l),{tokens:o,user:l}},async refreshToken(e){let t=(await n.post("/auth/refresh",{refresh_token:e})).data;return this.setTokens(t),t},async getCurrentUser(){let e=this.getTokens();if(!e)throw Error("No authentication tokens found");let t=(await n.get("/auth/me",{headers:{Authorization:"Bearer ".concat(e.access_token)}})).data;return this.setUser(t),t},setTokens(e){localStorage.setItem(o,JSON.stringify(e))},getTokens(){let e=localStorage.getItem(o);return e?JSON.parse(e):null},setUser(e){localStorage.setItem(l,JSON.stringify(e))},getUser(){let e=localStorage.getItem(l);return e?JSON.parse(e):null},logout(){localStorage.removeItem(o),localStorage.removeItem(l)},isAuthenticated(){let e=this.getTokens();return!!(null==e?void 0:e.access_token)},getAccessToken(){let e=this.getTokens();return(null==e?void 0:e.access_token)||null},getRefreshToken(){let e=this.getTokens();return(null==e?void 0:e.refresh_token)||null},async sendOTP(e){return this.sendTelegramOTP({phone_number:e})},async verifyOTP(e,t){let r=await this.verifyTelegramOTP({phone_number:e,otp_code:t});return{access_token:r.tokens.access_token,refresh_token:r.tokens.refresh_token}}};n.interceptors.request.use(e=>{let t=i.getTokens();return(null==t?void 0:t.access_token)&&(e.headers.Authorization="Bearer ".concat(t.access_token)),e}),n.interceptors.response.use(e=>e,async e=>{var t;if((null==(t=e.response)?void 0:t.status)===401){let t=i.getTokens();if(null==t?void 0:t.refresh_token)try{let r=await i.refreshToken(t.refresh_token),a=e.config;return a.headers.Authorization="Bearer ".concat(r.access_token),n(a)}catch(e){i.logout(),window.location.href="/login"}else i.logout(),window.location.href="/login"}return Promise.reject(e)})},89519:(e,t,r)=>{r.d(t,{Ay:()=>f,HW:()=>d,iD:()=>n,kz:()=>i,ri:()=>u});var a=r(5710),s=r(59959);let n=(0,a.zD)("auth/login",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.y.login(e)}catch(e){return r(e.message||"Login failed")}}),o=(0,a.zD)("auth/sendTelegramOTP",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.y.sendTelegramOTP(e)}catch(e){return r(e.message||"Failed to send OTP")}}),l=(0,a.zD)("auth/verifyTelegramOTP",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.y.verifyTelegramOTP(e)}catch(e){return r(e.message||"OTP verification failed")}}),i=(0,a.zD)("auth/register",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.y.register(e)}catch(e){return r(e.message||"Registration failed")}}),d=(0,a.zD)("auth/getCurrentUser",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.y.getCurrentUser()}catch(e){return r(e.message||"Failed to get user info")}}),c=(0,a.Z0)({name:"auth",initialState:{user:null,tokens:null,isLoading:!1,error:null},reducers:{logout:e=>{e.user=null,e.tokens=null,e.error=null,s.y.logout()},clearError:e=>{e.error=null},setTokens:(e,t)=>{e.tokens=t.payload}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.isLoading=!1,e.tokens=t.payload.tokens,e.user=t.payload.user}).addCase(n.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.isLoading=!1,e.tokens=t.payload.tokens,e.user=t.payload.user}).addCase(i.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(o.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o.fulfilled,e=>{e.isLoading=!1}).addCase(o.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.isLoading=!1,e.tokens=t.payload.tokens,e.user=t.payload.user}).addCase(l.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(d.fulfilled,(e,t)=>{e.user=t.payload})}}),{logout:u,clearError:h,setTokens:g}=c.actions,f=c.reducer}}]);