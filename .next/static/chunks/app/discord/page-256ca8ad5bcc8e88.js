(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{23867:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>D});var r=t(95155),a=t(12115),n=t(34540),i=t(12638),l=t(66695),d=t(30285),c=t(62523),o=t(85057),m=t(26126),x=t(81497),u=t(84616),h=t(33786),p=t(25487),f=t(76517),g=t(94449),v=t(17580),j=t(62525),b=t(85339),N=t(75525),y=t(60760),k=t(76408),w=t(13568),C=t(96809);function D(){let{user:e}=(0,n.d4)(e=>e.auth),[s,t]=(0,a.useState)([]),[D,_]=(0,a.useState)(!1),[A,R]=(0,a.useState)(!1),[S,F]=(0,a.useState)(""),[B,P]=(0,a.useState)(""),E={free:1,pro:3,elite:10},T=E[null==e?void 0:e.plan]||E.free,Z=s.length<T;(0,a.useEffect)(()=>{$()},[]);let $=async()=>{_(!0);try{let e=await C.K.get("/discord/servers");t(e.data)}catch(e){console.error("Failed to load Discord servers:",e)}_(!1)},z=async()=>{if(!S.trim())return void w.oR.error("Please enter a bot token");_(!0);try{await C.K.post("/discord/servers",{bot_token:S,server_name:B||void 0}),await $(),R(!1),F(""),P(""),w.oR.success("Discord server connected successfully")}catch(t){var e,s;w.oR.error((null==(s=t.response)||null==(e=s.data)?void 0:e.detail)||"Failed to connect Discord server")}_(!1)},M=async e=>{if(confirm("Are you sure you want to remove this Discord server?"))try{await C.K.delete("/discord/servers/".concat(e)),await $(),w.oR.success("Discord server removed successfully")}catch(e){var s,t;w.oR.error((null==(t=e.response)||null==(s=t.data)?void 0:s.detail)||"Failed to remove server")}},I=async(e,s)=>{try{await C.K.patch("/discord/servers/".concat(e),{is_active:!s}),await $(),w.oR.success("Server ".concat(s?"deactivated":"activated"," successfully"))}catch(e){var t,r;w.oR.error((null==(r=e.response)||null==(t=r.data)?void 0:t.detail)||"Failed to update server")}},W=e=>{switch(e){case"online":return"text-neon-green border-neon-green/30 bg-neon-green/10";case"connecting":return"text-neon-orange border-neon-orange/30 bg-neon-orange/10";case"offline":return"text-red-400 border-red-400/30 bg-red-400/10";default:return"text-dark-muted border-dark-border bg-dark-border/10"}};return(0,r.jsx)(i.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-dark-text flex items-center gap-3",children:[(0,r.jsx)(x.A,{className:"h-8 w-8 text-purple-400"}),"Discord Servers"]}),(0,r.jsx)("p",{className:"text-dark-muted mt-1",children:"Manage your connected Discord servers for message forwarding"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(m.E,{variant:"outline",className:"text-purple-400 border-purple-400",children:[s.length," / ",T," servers"]}),(0,r.jsxs)(d.$,{onClick:()=>R(!0),disabled:!Z,className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Add Server"]})]})]}),(0,r.jsx)(y.N,{children:A&&(0,r.jsx)(k.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,r.jsxs)(l.Zp,{className:"glass-effect border-purple-400/30 bg-purple-400/5",children:[(0,r.jsx)(l.aR,{children:(0,r.jsxs)(l.ZB,{className:"text-dark-text flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 text-purple-400"}),"Connect Discord Server"]})}),(0,r.jsx)(l.Wu,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"serverName",className:"text-dark-text",children:"Server Name (Optional)"}),(0,r.jsx)(c.p,{id:"serverName",placeholder:"My Discord Server",value:B,onChange:e=>P(e.target.value),className:"mt-1 bg-dark-border border-dark-border text-dark-text"}),(0,r.jsx)("p",{className:"text-dark-muted text-sm mt-1",children:"Custom name for easy identification"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.J,{htmlFor:"botToken",className:"text-dark-text",children:"Bot Token"}),(0,r.jsx)(c.p,{id:"botToken",type:"password",placeholder:"Your Discord bot token",value:S,onChange:e=>F(e.target.value),className:"mt-1 bg-dark-border border-dark-border text-dark-text"}),(0,r.jsx)("p",{className:"text-dark-muted text-sm mt-1",children:"Get your bot token from Discord Developer Portal"})]}),(0,r.jsxs)("div",{className:"p-4 bg-neon-blue/10 border border-neon-blue/30 rounded-lg",children:[(0,r.jsxs)("h4",{className:"text-dark-text font-medium mb-2 flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),"How to create a Discord bot:"]}),(0,r.jsxs)("ol",{className:"text-dark-muted text-sm space-y-1 list-decimal list-inside",children:[(0,r.jsx)("li",{children:"Go to Discord Developer Portal"}),(0,r.jsx)("li",{children:"Create a new application and bot"}),(0,r.jsx)("li",{children:"Copy the bot token"}),(0,r.jsx)("li",{children:"Invite the bot to your server with necessary permissions"})]}),(0,r.jsxs)(d.$,{size:"sm",variant:"outline",className:"mt-3 border-neon-blue text-neon-blue hover:bg-neon-blue/10",onClick:()=>window.open("https://discord.com/developers/applications","_blank"),children:[(0,r.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Developer Portal"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(d.$,{onClick:z,disabled:!S||D,className:"bg-purple-500 hover:bg-purple-600 text-white",children:D?"Connecting...":"Connect Server"}),(0,r.jsx)(d.$,{variant:"outline",onClick:()=>R(!1),className:"border-dark-border hover:border-red-400 hover:text-red-400",children:"Cancel"})]})]})})]})})}),(0,r.jsx)(y.N,{mode:"wait",children:D?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-400"})}):0===s.length?(0,r.jsx)(l.Zp,{className:"glass-effect border-dark-border",children:(0,r.jsxs)(l.Wu,{className:"text-center py-12",children:[(0,r.jsx)(x.A,{className:"h-12 w-12 text-dark-muted mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-dark-text mb-2",children:"No Discord servers connected"}),(0,r.jsx)("p",{className:"text-dark-muted mb-6",children:"Connect your first Discord server to start forwarding messages"}),Z&&(0,r.jsxs)(d.$,{onClick:()=>R(!0),className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Connect Discord"]})]})}):(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:s.map((e,s)=>{var t;return(0,r.jsx)(k.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:(0,r.jsxs)(l.Zp,{className:"glass-effect border-dark-border hover:border-purple-400/50 transition-all duration-300 group",children:[(0,r.jsx)(l.aR,{className:"pb-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)(p.A,{className:"h-5 w-5 text-purple-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-dark-text font-medium",children:e.server_name}),(0,r.jsx)("p",{className:"text-dark-muted text-sm",children:e.server_id})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(m.E,{className:"text-xs ".concat(W(e.bot_status)),children:e.bot_status})})]})}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-dark-muted text-sm",children:"Status"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:e.is_active?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"h-3 w-3 text-neon-green"}),(0,r.jsx)("span",{className:"text-neon-green text-sm",children:"Active"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"h-3 w-3 text-red-400"}),(0,r.jsx)("span",{className:"text-red-400 text-sm",children:"Inactive"})]})})]}),e.member_count&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-dark-muted text-sm",children:"Members"}),(0,r.jsxs)("span",{className:"text-dark-text text-sm flex items-center gap-1",children:[(0,r.jsx)(v.A,{className:"h-3 w-3"}),e.member_count]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-dark-muted text-sm",children:"Permissions"}),(0,r.jsxs)("span",{className:"text-dark-text text-sm",children:[(null==(t=e.permissions)?void 0:t.length)||0," granted"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-dark-muted text-sm",children:"Last Seen"}),(0,r.jsx)("span",{className:"text-dark-text text-sm",children:new Date(e.last_seen).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-dark-muted text-sm",children:"Connected"}),(0,r.jsx)("span",{className:"text-dark-text text-sm",children:new Date(e.created_at).toLocaleDateString()})]})]}),e.permissions&&e.permissions.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-dark-muted text-sm mb-2",children:"Bot Permissions:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.permissions.slice(0,3).map((e,s)=>(0,r.jsx)(m.E,{variant:"outline",className:"text-xs",children:e},s)),e.permissions.length>3&&(0,r.jsxs)(m.E,{variant:"outline",className:"text-xs",children:["+",e.permissions.length-3," more"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,r.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>I(e.id,e.is_active),className:"flex-1 ".concat(e.is_active?"border-red-400/30 text-red-400 hover:bg-red-400/10":"border-neon-green/30 text-neon-green hover:bg-neon-green/10"),children:e.is_active?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"h-3 w-3 mr-1"}),"Deactivate"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Activate"]})}),(0,r.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>M(e.id),className:"border-red-400/30 text-red-400 hover:bg-red-400/10",children:(0,r.jsx)(j.A,{className:"h-3 w-3"})})]})]})]})},e.id)})})}),!Z&&(0,r.jsx)(l.Zp,{className:"glass-effect border-neon-orange/30 bg-neon-orange/5",children:(0,r.jsx)(l.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(b.A,{className:"h-5 w-5 text-neon-orange"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-dark-text font-medium",children:"Server Limit Reached"}),(0,r.jsxs)("p",{className:"text-dark-muted text-sm",children:["Upgrade to ",(null==e?void 0:e.plan)==="free"?"Pro":"Elite"," plan to connect more Discord servers"]})]}),(0,r.jsx)(d.$,{size:"sm",className:"ml-auto bg-neon-orange hover:bg-neon-orange/90 text-black",onClick:()=>window.location.href="/billing",children:"Upgrade"})]})})}),(0,r.jsxs)(l.Zp,{className:"glass-effect border-dark-border",children:[(0,r.jsx)(l.aR,{children:(0,r.jsxs)(l.ZB,{className:"text-dark-text flex items-center gap-2",children:[(0,r.jsx)(N.A,{className:"h-5 w-5 text-neon-blue"}),"Important Information"]})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-dark-text font-medium mb-3",children:"Bot Setup Requirements"}),(0,r.jsxs)("ul",{className:"text-dark-muted text-sm space-y-2",children:[(0,r.jsx)("li",{children:'• Your bot needs "Send Messages" permission'}),(0,r.jsx)("li",{children:"• Bot should have access to target channels"}),(0,r.jsx)("li",{children:'• Ensure bot has "Read Message History" for context'}),(0,r.jsx)("li",{children:'• "Manage Messages" for advanced features'})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-dark-text font-medium mb-3",children:"Security & Management"}),(0,r.jsxs)("ul",{className:"text-dark-muted text-sm space-y-2",children:[(0,r.jsx)("li",{children:"• Bot tokens are encrypted and stored securely"}),(0,r.jsx)("li",{children:"• Each server can be used in multiple forwarding pairs"}),(0,r.jsx)("li",{children:"• Inactive servers won't participate in forwarding"}),(0,r.jsx)("li",{children:"• Bot health is monitored automatically"})]})]})]})})]})]})})}},30285:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var r=t(95155),a=t(12115),n=t(99708),i=t(74466),l=t(59434);let d=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:c=!1,...o}=e,m=c?n.DX:"button";return(0,r.jsx)(m,{className:(0,l.cn)(d({variant:a,size:i,className:t})),ref:s,...o})});c.displayName="Button"},62523:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var r=t(95155),a=t(12115),n=t(59434);let i=a.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});i.displayName="Input"},62870:(e,s,t)=>{Promise.resolve().then(t.bind(t,23867))},66695:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l});var r=t(95155),a=t(12115),n=t(59434);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})}).displayName="CardDescription";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},85057:(e,s,t)=>{"use strict";t.d(s,{J:()=>c});var r=t(95155),a=t(12115),n=t(40968),i=t(74466),l=t(59434);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.b,{ref:s,className:(0,l.cn)(d(),t),...a})});c.displayName=n.b.displayName},96809:(e,s,t)=>{"use strict";t.d(s,{K:()=>i});var r=t(23464),a=t(59959);class n{async get(e,s){return this.api.get(e,s)}async post(e,s,t){return this.api.post(e,s,t)}async put(e,s,t){return this.api.put(e,s,t)}async patch(e,s,t){return this.api.patch(e,s,t)}async delete(e,s){return this.api.delete(e,s)}async uploadFile(e,s,t){let r=new FormData;return r.append("file",s),this.api.post(e,r,{...t,headers:{...null==t?void 0:t.headers,"Content-Type":"multipart/form-data"}})}constructor(){this.api=r.A.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(e=>{let s=a.y.getAccessToken();return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),this.api.interceptors.response.use(e=>e,async e=>{var s;if((null==(s=e.response)?void 0:s.status)===401){let s=a.y.getRefreshToken();if(s)try{let{access_token:t,refresh_token:r}=(await this.api.post("/auth/refresh",{refresh_token:s})).data;return a.y.setTokens({access_token:t,refresh_token:r,token_type:"bearer",expires_in:3600}),e.config.headers.Authorization="Bearer ".concat(t),this.api.request(e.config)}catch(e){a.y.logout(),window.location.href="/login"}else a.y.logout(),window.location.href="/login"}return Promise.reject(e)})}}let i=new n}},e=>{var s=s=>e(e.s=s);e.O(0,[464,555,778,568,569,642,831,441,684,358],()=>s(62870)),_N_E=e.O()}]);