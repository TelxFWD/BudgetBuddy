(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{8979:(e,s,a)=>{"use strict";a.d(s,{Ay:()=>o,Ez:()=>d,NC:()=>i,VE:()=>l});var t=a(5710),r=a(96809);let l=(0,t.zD)("analytics/fetchAnalytics",async(e,s)=>{let{rejectWithValue:a}=s;try{return(await r.K.get("/analytics/user")).data}catch(e){var t,l;return a((null==(l=e.response)||null==(t=l.data)?void 0:t.detail)||"Failed to fetch analytics")}}),d=(0,t.zD)("analytics/fetchMessageVolume",async(e,s)=>{let{days:a=7}=e,{rejectWithValue:t}=s;try{return(await r.K.get("/analytics/message-volume?days=".concat(a))).data}catch(e){var l,d;return t((null==(d=e.response)||null==(l=d.data)?void 0:l.detail)||"Failed to fetch message volume")}}),i=(0,t.zD)("analytics/fetchErrorSummary",async(e,s)=>{let{days:a=7}=e,{rejectWithValue:t}=s;try{return(await r.K.get("/analytics/errors?days=".concat(a))).data}catch(e){var l,d;return t((null==(d=e.response)||null==(l=d.data)?void 0:l.detail)||"Failed to fetch error summary")}}),n=(0,t.Z0)({name:"analytics",initialState:{stats:null,messageVolume:[],errorSummary:[],isLoading:!1,error:null},reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,s)=>{e.isLoading=!1,e.stats=s.payload}).addCase(l.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(d.fulfilled,(e,s)=>{e.messageVolume=s.payload}).addCase(d.rejected,(e,s)=>{e.error=s.payload}).addCase(i.fulfilled,(e,s)=>{e.errorSummary=s.payload}).addCase(i.rejected,(e,s)=>{e.error=s.payload})}}),{clearError:c}=n.actions,o=n.reducer},17313:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>c,av:()=>o,j7:()=>n,tU:()=>i});var t=a(95155),r=a(12115),l=a(88143),d=a(59434);let i=l.bL,n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.B8,{ref:s,className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});n.displayName=l.B8.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.l9,{ref:s,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=l.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.UC,{ref:s,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});o.displayName=l.UC.displayName},18495:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>L});var t=a(95155),r=a(12115),l=a(34540),d=a(8979),i=a(12638),n=a(66695),c=a(30285),o=a(26126),x=a(17313),m=a(72713),u=a(53904),h=a(91788),p=a(81497),f=a(40646),j=a(14186),g=a(79397),v=a(33109),y=a(1243),b=a(76408),N=a(13568),k=a(83540),w=a(99445),C=a(94754),R=a(96025),_=a(52071),A=a(85755),S=a(41213),D=a(3401),E=a(64683),F=a(91590),P=a(90170),Z=a(18357),z=a(54811);function L(){let e=(0,l.wA)(),{stats:s,messageVolume:a,errorSummary:L,isLoading:W}=(0,l.d4)(e=>e.analytics),{user:B}=(0,l.d4)(e=>e.auth),[K,V]=(0,r.useState)("7"),[O,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{U()},[e,K]);let U=async()=>{T(!0);try{await Promise.all([e((0,d.VE)()),e((0,d.Ez)({days:parseInt(K)})),e((0,d.NC)({days:parseInt(K)}))])}catch(e){N.oR.error("Failed to load analytics data")}T(!1)},M=e=>{if("csv"===e){let e=null==a?void 0:a.map(e=>({Date:e.date,Messages:e.message_count,Success:e.success_count,Errors:e.error_count})),s=new Blob([[Object.keys(e[0]||{}).join(","),...e.map(e=>Object.values(e).join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download="analytics-".concat(new Date().toISOString().split("T")[0],".csv"),r.click(),window.URL.revokeObjectURL(t),N.oR.success("CSV exported successfully")}else N.oR.success("PDF export feature coming soon")},X="#00d4ff",H="#00ff88",$="#ff006e",I=[{name:"Successful",value:(null==s?void 0:s.messages_today)||0,color:H},{name:"Failed",value:((null==s?void 0:s.total_messages_forwarded)||0)-((null==s?void 0:s.messages_today)||0),color:$}];return(0,t.jsx)(i.A,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-dark-text flex items-center gap-3",children:[(0,t.jsx)(m.A,{className:"h-8 w-8 text-neon-purple"}),"Analytics Dashboard"]}),(0,t.jsx)("p",{className:"text-dark-muted mt-1",children:"Real-time insights and performance metrics"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("select",{value:K,onChange:e=>V(e.target.value),className:"px-3 py-2 bg-dark-border border border-dark-border rounded-lg text-dark-text focus:border-neon-blue focus:outline-none",children:[(0,t.jsx)("option",{value:"7",children:"Last 7 days"}),(0,t.jsx)("option",{value:"30",children:"Last 30 days"}),(0,t.jsx)("option",{value:"90",children:"Last 90 days"})]}),(0,t.jsxs)(c.$,{onClick:U,disabled:O,variant:"outline",className:"border-dark-border hover:border-neon-blue",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2 ".concat(O?"animate-spin":"")}),"Refresh"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.$,{onClick:()=>M("csv"),size:"sm",variant:"outline",className:"border-dark-border hover:border-neon-green",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"CSV"]}),(0,t.jsxs)(c.$,{onClick:()=>M("pdf"),size:"sm",variant:"outline",className:"border-dark-border hover:border-neon-orange",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"PDF"]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsx)(n.Zp,{className:"glass-effect border-dark-border",children:(0,t.jsxs)(n.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:"Total Messages"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-dark-text",children:(null==s?void 0:s.total_messages_forwarded)||0})]}),(0,t.jsx)("div",{className:"p-3 bg-neon-blue/20 rounded-lg",children:(0,t.jsx)(p.A,{className:"h-6 w-6 text-neon-blue"})})]}),(0,t.jsx)("p",{className:"text-xs text-dark-muted mt-2",children:"All time forwarded"})]})})}),(0,t.jsx)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsx)(n.Zp,{className:"glass-effect border-dark-border",children:(0,t.jsxs)(n.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:"Success Rate"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-dark-text",children:(null==s?void 0:s.success_rate)?"".concat((100*s.success_rate).toFixed(1),"%"):"0%"})]}),(0,t.jsx)("div",{className:"p-3 bg-neon-green/20 rounded-lg",children:(0,t.jsx)(f.A,{className:"h-6 w-6 text-neon-green"})})]}),(0,t.jsxs)("p",{className:"text-xs text-dark-muted mt-2",children:["Last ",K," days"]})]})})}),(0,t.jsx)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,t.jsx)(n.Zp,{className:"glass-effect border-dark-border",children:(0,t.jsxs)(n.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:"Average Delay"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-dark-text",children:(null==s?void 0:s.avg_delay)?"".concat(s.avg_delay.toFixed(1),"s"):"0s"})]}),(0,t.jsx)("div",{className:"p-3 bg-neon-orange/20 rounded-lg",children:(0,t.jsx)(j.A,{className:"h-6 w-6 text-neon-orange"})})]}),(0,t.jsx)("p",{className:"text-xs text-dark-muted mt-2",children:"Processing time"})]})})}),(0,t.jsx)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,t.jsx)(n.Zp,{className:"glass-effect border-dark-border",children:(0,t.jsxs)(n.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:"Active Pairs"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-dark-text",children:(null==s?void 0:s.active_pairs)||0})]}),(0,t.jsx)("div",{className:"p-3 bg-neon-purple/20 rounded-lg",children:(0,t.jsx)(g.A,{className:"h-6 w-6 text-neon-purple"})})]}),(0,t.jsx)("p",{className:"text-xs text-dark-muted mt-2",children:"Currently running"})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(n.Zp,{className:"glass-effect border-dark-border",children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"text-dark-text flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"h-5 w-5 text-neon-blue"}),"Message Volume"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"h-80",children:(0,t.jsx)(k.u,{width:"100%",height:"100%",children:(0,t.jsxs)(w.Q,{data:a,children:[(0,t.jsx)(C.d,{strokeDasharray:"3 3",stroke:"#2d2d30"}),(0,t.jsx)(R.W,{dataKey:"date",stroke:"#71717a",fontSize:12}),(0,t.jsx)(_.h,{stroke:"#71717a",fontSize:12}),(0,t.jsx)(A.m,{contentStyle:{backgroundColor:"#1a1a1b",border:"1px solid #2d2d30",borderRadius:"8px",color:"#e4e4e7"}}),(0,t.jsx)(S.Gk,{type:"monotone",dataKey:"message_count",stroke:X,fill:X,fillOpacity:.2,strokeWidth:2})]})})})})]}),(0,t.jsxs)(n.Zp,{className:"glass-effect border-dark-border",children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"text-dark-text flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"h-5 w-5 text-neon-green"}),"Success vs Errors"]})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"h-80",children:(0,t.jsx)(k.u,{width:"100%",height:"100%",children:(0,t.jsxs)(D.E,{data:a,children:[(0,t.jsx)(C.d,{strokeDasharray:"3 3",stroke:"#2d2d30"}),(0,t.jsx)(R.W,{dataKey:"date",stroke:"#71717a",fontSize:12}),(0,t.jsx)(_.h,{stroke:"#71717a",fontSize:12}),(0,t.jsx)(A.m,{contentStyle:{backgroundColor:"#1a1a1b",border:"1px solid #2d2d30",borderRadius:"8px",color:"#e4e4e7"}}),(0,t.jsx)(E.s,{}),(0,t.jsx)(F.y,{dataKey:"success_count",fill:H,name:"Success",radius:[4,4,0,0]}),(0,t.jsx)(F.y,{dataKey:"error_count",fill:$,name:"Errors",radius:[4,4,0,0]})]})})})})]})]}),(0,t.jsxs)(n.Zp,{className:"glass-effect border-dark-border",children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{className:"text-dark-text",children:"Detailed Analytics"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)(x.tU,{defaultValue:"overview",className:"w-full",children:[(0,t.jsxs)(x.j7,{className:"grid w-full grid-cols-3 bg-dark-border",children:[(0,t.jsx)(x.Xi,{value:"overview",className:"data-[state=active]:bg-dark-border",children:"Overview"}),(0,t.jsx)(x.Xi,{value:"performance",className:"data-[state=active]:bg-dark-border",children:"Performance"}),(0,t.jsx)(x.Xi,{value:"errors",className:"data-[state=active]:bg-dark-border",children:"Error Analysis"})]}),(0,t.jsx)(x.av,{value:"overview",className:"space-y-4 mt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-dark-text mb-4",children:"Daily Activity"}),(0,t.jsx)("div",{className:"space-y-3",children:null==a?void 0:a.slice(-7).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-dark-border rounded-lg",children:[(0,t.jsx)("span",{className:"text-dark-text",children:new Date(e.date).toLocaleDateString()}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"text-neon-green text-sm",children:[e.success_count," success"]}),(0,t.jsxs)("span",{className:"text-red-400 text-sm",children:[e.error_count," errors"]})]})]},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-dark-text mb-4",children:"Success Distribution"}),(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)(k.u,{width:"100%",height:"100%",children:(0,t.jsxs)(P.r,{children:[(0,t.jsx)(Z.F,{data:I,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:e=>{let{name:s,percent:a}=e;return"".concat(s," ").concat(a?(100*a).toFixed(0):0,"%")},children:I.map((e,s)=>(0,t.jsx)(z.f,{fill:e.color},"cell-".concat(s)))}),(0,t.jsx)(A.m,{})]})})})]})]})}),(0,t.jsx)(x.av,{value:"performance",className:"space-y-4 mt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(n.Zp,{className:"bg-dark-border border-dark-border",children:(0,t.jsx)(n.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:"Peak Hour"}),(0,t.jsx)("p",{className:"text-xl font-bold text-dark-text",children:"2:00 PM"})]})})}),(0,t.jsx)(n.Zp,{className:"bg-dark-border border-dark-border",children:(0,t.jsx)(n.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:"Fastest Pair"}),(0,t.jsx)("p",{className:"text-xl font-bold text-dark-text",children:"0.3s"})]})})}),(0,t.jsx)(n.Zp,{className:"bg-dark-border border-dark-border",children:(0,t.jsx)(n.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:"Queue Health"}),(0,t.jsx)("p",{className:"text-xl font-bold text-neon-green",children:"Healthy"})]})})})]})}),(0,t.jsx)(x.av,{value:"errors",className:"space-y-4 mt-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-dark-text",children:"Common Error Types"}),(null==L?void 0:L.length)>0?(0,t.jsx)("div",{className:"space-y-3",children:L.map((e,s)=>(0,t.jsx)("div",{className:"p-4 bg-red-400/10 border border-red-400/30 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(y.A,{className:"h-5 w-5 text-red-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-text font-medium",children:e.type}),(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:e.message})]})]}),(0,t.jsxs)(o.E,{variant:"destructive",children:[e.count," occurrences"]})]})},s))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(f.A,{className:"h-12 w-12 text-neon-green mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-dark-text",children:"No errors in the selected period"}),(0,t.jsx)("p",{className:"text-dark-muted text-sm",children:"Your system is running smoothly!"})]})]})})]})})]})]})})}},30285:(e,s,a)=>{"use strict";a.d(s,{$:()=>c});var t=a(95155),r=a(12115),l=a(99708),d=a(74466),i=a(59434);let n=(0,d.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:a,variant:r,size:d,asChild:c=!1,...o}=e,x=c?l.DX:"button";return(0,t.jsx)(x,{className:(0,i.cn)(n({variant:r,size:d,className:a})),ref:s,...o})});c.displayName="Button"},59170:(e,s,a)=>{Promise.resolve().then(a.bind(a,18495))},66695:(e,s,a)=>{"use strict";a.d(s,{Wu:()=>c,ZB:()=>n,Zp:()=>d,aR:()=>i});var t=a(95155),r=a(12115),l=a(59434);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});d.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});n.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},96809:(e,s,a)=>{"use strict";a.d(s,{K:()=>d});var t=a(23464),r=a(59959);class l{async get(e,s){return this.api.get(e,s)}async post(e,s,a){return this.api.post(e,s,a)}async put(e,s,a){return this.api.put(e,s,a)}async patch(e,s,a){return this.api.patch(e,s,a)}async delete(e,s){return this.api.delete(e,s)}async uploadFile(e,s,a){let t=new FormData;return t.append("file",s),this.api.post(e,t,{...a,headers:{...null==a?void 0:a.headers,"Content-Type":"multipart/form-data"}})}constructor(){this.api=t.A.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(e=>{let s=r.y.getAccessToken();return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),this.api.interceptors.response.use(e=>e,async e=>{var s;if((null==(s=e.response)?void 0:s.status)===401){let s=r.y.getRefreshToken();if(s)try{let{access_token:a,refresh_token:t}=(await this.api.post("/auth/refresh",{refresh_token:s})).data;return r.y.setTokens({access_token:a,refresh_token:t,token_type:"bearer",expires_in:3600}),e.config.headers.Authorization="Bearer ".concat(a),this.api.request(e.config)}catch(e){r.y.logout(),window.location.href="/login"}else r.y.logout(),window.location.href="/login"}return Promise.reject(e)})}}let d=new l}},e=>{var s=s=>e(e.s=s);e.O(0,[464,555,778,568,569,143,477,831,441,684,358],()=>s(59170)),_N_E=e.O()}]);